<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
    <section name="unity" type="Microsoft.Practices.Unity.Configuration.UnityConfigurationSection, Microsoft.Practices.Unity.Configuration" requirePermission="false" />
    <section name="tescoConfigSettingsConfiguration" type="Tesco.Com.Framework.Services.Configuration.TescoConfigSettingsConfigurationSection, Tesco.Com.Framework" restartOnExternalChanges="true" />
    <section name="botDetect" requirePermission="false" type="BotDetect.Configuration.BotDetectConfigurationSection, BotDetect" />
  </configSections>
  <!--<connectionStrings>
    <add name="DefaultConnection" providerName="System.Data.SqlClient" connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=aspnet-Web-20151129150005;Integrated Security=SSPI"/>
  </connectionStrings>-->
  <botDetect>
    <captchaUserInput autoLowercase="false" autoClear="false" autoFocus="false" />
    <captchaImage>
      <helpLink enabled="true" mode="image" />
    </captchaImage>
  </botDetect>
  <appSettings>
    <add key="webpages:Version" value="2.0.0.0" />
    <add key="webpages:Enabled" value="false" />
    <add key="PreserveLoginUrl" value="true" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
    <!--Martini Reference Monitor Constants-->
    <add key="CacheUpdateHours" value="24" />
    <add key="CacheUpdateMinutes" value="0" />
    <add key="CacheUpdateSeconds" value="0" />
    <add key="AccessControlPolicyCacheExpiry" value="24" />
    <add key="DomainName" value="tesco.com" />
    <!--************************************************************************-->
    <!--<add key="applicationId" value="4"/>not used-->
    <add key="applicationId" value="22" />
    <add key="enforceSingleIpAddressForASingleSession" value="false" />
    <add key="TimerCredentialTimeout" value="3600" />
    <add key="ServiceConsumer" value="Dotcom Customer" />
    <add key="DBConfigurationXmlFile" value="~/Config/dbConfiguration.xml" />
    <add key="NLogConfigPath" value="Config\NLog.config" />
    <add key="LoggingConfiguration" value="{          'default': 'error',          'account': 'error',          'activation': 'error',          'boostsattesco': 'error',          'christmassaver': 'error',          'coupons': 'error',          'emaildownload': 'error',          'home': 'error',          'myaccountdetails': 'error',          'mylateststatement': 'error',          'orderareplacement': 'error',          'personaldetails': 'error',          'join': 'error',          'points': 'error',          'vouchers': 'error'}" />
    <add key="IsEventLogEnable" value="true" />
    <add key="EncryptionKey" value="BE8BE3A1-A7EC-4E4A-816A-6BE9B2638241" />
    <add key="SaltKey" value="@@££##" />
    <add key="EncryptedSecureConfigFile" value="~/Config/keys.json" />
    <add key="jwtkey" value="ApUpLH6uoRqolMXHrtFjixODGEu8cs5DV94wS7ZsEzikSyQ+bb4BVQ==" />
    <add key="responsecookie" value="DCMCAPPE=SDC###" />
  </appSettings>
  <unity configSource="Config\Unity.config" />
  <system.serviceModel>
    <bindings configSource="Config\wcfstandardbinding.config" />
    <client configSource="Config\wcfclientendpoints.config" />
    <behaviors configSource="Config\wcfbehaviors.config" />
  </system.serviceModel>
  <tescoConfigSettingsConfiguration connectionStringsAreEncrypted="false">
    <tescoConfigSettingLocations>
      <!--This section identifies the locations of GLOBAL config settings.-->
      <!--valid values are "ConfigFile", "Registry" and "Database" (case-sensitive).  The default (if no location is specified) is ConfigFile.-->
      <add item="MartiniSecurityDB" location="Database" />
      <add item="CustomerCapabilityDB" location="Database" />
      <add item="CustomerCoreDB" location="Database" />
      <add item="PAF" location="Database" />
      <add item="MaterialStoreEncryptionKey" location="Database" />
      <add item="MaterialStoreEncryptionIV" location="Database" />
      <add item="MaterialStoreEncryptionSalt" location="Database" />
      <add item="MaterialStoreEncryptingAlgorithm" location="Database" />
      <add item="First_Time_Shopper_Targetting_Segment" location="Database" />
      <add item="Pre_Auth_Amount" location="Database" />
      <add item="Billing_AddressVerification_Enabled" location="Database" />
      <add item="VbV_Enabled" location="ConfigFile" />
      <add item="MCSC_Enabled" location="ConfigFile" />
      <add item="PointsToCustomer" location="Database" />
      <add item="PointsToFriend" location="Database" />
      <add item="Green_clubcard_points" location="Database" />
      <add item="Staff_Discount" location="Database" />
      <add item="Standard_clubcard_points" location="Database" />
      <!-- Commented as part of the config cleanup on 18-06-2009-->
      <!-- *****************************************************-->
      <!--<add item="Business_Channel_To_VirtualStore_Mapping" location="Database"/>-->
      <!-- *****************************************************-->
      <!-- added two item -->
      <add item="SecurityCodeLength_AmericanExpress" location="Database" />
      <add item="SecurityCodeLength_Other" location="Database" />
      <add item="Secure_Enabled" location="Database" />
      <add item="Domain" location="Database" />
      <add item="GestureOfGoodWillCampaignId" location="Database" />
      <add item="VAT" location="ConfigFile" />
      <add item="Valid_ClubCard_Prefixes" location="Database" />
      <add item="Delivery_Prem_Default_Weeks" location="Database" />
      <add item="LegacyFlag" location="Database" />
    </tescoConfigSettingLocations>
  </tescoConfigSettingsConfiguration>
  <system.web>
    <globalization configSource="Config\culture.config" />
    <compilation debug="true" targetFramework="4.0" />
    <pages enableSessionState="true" viewStateEncryptionMode="Always" controlRenderingCompatibilityVersion="3.5" clientIDMode="AutoID" validateRequest="false">
      <controls>
        <add assembly="BotDetect" namespace="BotDetect.Web.UI" tagPrefix="BotDetect" />
      </controls>
      <namespaces>
        <add namespace="BotDetect" />
        <add namespace="BotDetect.Web" />
        <add namespace="BotDetect.Web.UI" />
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Optimization" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
    </pages>
    <profile defaultProvider="DefaultProfileProvider">
      <providers>
        <add name="DefaultProfileProvider" type="System.Web.Providers.DefaultProfileProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/" />
      </providers>
    </profile>
    <membership defaultProvider="DefaultMembershipProvider">
      <providers>
        <add name="DefaultMembershipProvider" type="System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" />
      </providers>
    </membership>
    <roleManager defaultProvider="DefaultRoleProvider">
      <providers>
        <add name="DefaultRoleProvider" type="System.Web.Providers.DefaultRoleProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/" />
      </providers>
    </roleManager>
    <!--<sessionState cookieless="false" mode="SQLServer" sessionIDManagerType="BotDetect.Web.CustomSessionIdManager, BotDetect" sqlConnectionString="data source=172.25.33.89;user id=ccJoinsession;password=##535510n" timeout="20"/>-->
    <httpHandlers>
      <add verb="GET" path="BotDetectCaptcha.ashx" type="BotDetect.Web.CaptchaHandler, BotDetect" />
    </httpHandlers>
    <!-->httpModules>
      <add name="RefMonHttpModule" type="Tesco.Com.Framework.Security.ReferenceMonitor.RefMonHttpModule,Tesco.Com.Framework.Security.ReferenceMonitor"/>
      <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    </httpModules-->
    <httpRuntime requestValidationMode="2.0" />
    <customErrors mode="On">
      <error statusCode="404" redirect="~/MCAError/Home" />
    </customErrors>
    <sessionState mode="InProc" cookieless="false" timeout="20" sessionIDManagerType="BotDetect.Web.CustomSessionIdManager, BotDetect" />
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true">
      <remove name="ScriptModule" />
      <add name="ScriptModule" preCondition="managedHandler" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      <!--><remove name="RefMon"/>
      <add name="RefMon" type="Tesco.Com.Framework.Security.ReferenceMonitor.RefMonHttpModule"/>-->
      <remove name="BundleModule" />
      <add name="BundleModule" type="System.Web.Optimization.BundleModule" />
    </modules>
    <handlers>
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
      <remove name="BotDetectCaptchaHandler" />
      <add name="BotDetectCaptchaHandler" preCondition="integratedMode" verb="GET" path="BotDetectCaptcha.ashx" type="BotDetect.Web.CaptchaHandler, BotDetect" />
    </handlers>
    <directoryBrowse enabled="false" />
    <defaultDocument enabled="false">
      <files/>
    </defaultDocument>
    <httpProtocol>
      <customHeaders>
        <clear/>
        <add name="X-UA-Compatible" value="IE=edge, chrome=1" />
        <remove name="X-Powered-By" />
        <add name="X-Frame-Options" value="SAMEORIGIN" />
        <add name="CONTENT-SECURITY-POLICY" value="default-src https://*.zscalertwo.net 'self' *.tesco.com *.virtualearth.net *.iesnare.com; connect-src https://*.zscalertwo.net 'self' *.optimizely.com *.log.optimizely.com *.col.eum-appdynamics.com https://cdn.optimizely.com https://col.eum-appdynamics.com https://5974661041.log.optimizely.com/; script-src https://*.zscalertwo.net 'self' 'unsafe-eval' 'unsafe-inline' *.tesco.com *.optimizely.com *.appdynamics.com *.iesnare.com *.googleapis.com *.eum-appdynamics.com *.virtualearth.net *.bazaarvoice.com *.acme.com *.sociomantic.com *.twitter.com https://connect.facebook.net/en_GB/sdk.js https://maps.googleapis.com/maps/api/js https://mpsnare.iesnare.com/snare.js https://platform.twitter.com/widgets.js http://display-stg.ugc.bazaarvoice.com https://mygeo.acme.com https://eu-sonar.sociomantic.com https://cdn.appdynamics.com https://col.eum-appdynamics.com https://cdn.optimizely.com https://5974661041.log.optimizely.com/ *.adobedtm.com *.google-analytics.com *.tt.omtrdc.net https://assets.adobedtm.com https://cdn.tt.omtrdc.net https://tescostoresltd.tt.omtrdc.net remote.captcha.com *.gstatic.com *.google.com https://connect.facebook.net/en_US/all.js https://www.google.com/recaptcha/api.js; frame-ancestors 'self' app.optimizely.com optimizelyedit.com; style-src *.virtualearth.net *.bazaarvoice.com https://*.zscalertwo.net 'self' 'unsafe-inline'; img-src https://*.zscalertwo.net *.sociomantic.com 'self' data: *.google-analytics.com *.cloudfront.net *.twitter.com *.google.com *.gstatic.com *.google.co.uk *.google.co.in *.tesco.com *.virtualearth.net *.doubleclick.net *.facebook.com *.bazaarvoice.com https://5035317.fls.doubleclick.net/ http://placehold.it *.imgix.net; font-src https://*.zscalertwo.net 'self' *.tesco.com data:; child-src https://*.zscalertwo.net *.doubleclick.net *.virtualearth.net *.facebook.com *.sociomantic.com *.ugc.bazaarvoice.com *.bazaarvoice.com *.twitter.com;" />
      </customHeaders>
    </httpProtocol>
    <security>
      <requestFiltering>
        <requestLimits maxAllowedContentLength="500000" maxQueryString="1024" maxUrl="2048">
          <headerLimits>
            <add header="Content-type" sizeLimit="100" />
          </headerLimits>
        </requestLimits>
      </requestFiltering>
    </security>
    <staticContent>
      <remove fileExtension=".woff" />
      <!-- In case IIS already has this mime type -->
      <mimeMap fileExtension=".woff" mimeType="application/x-font-woff" />
    </staticContent>
  </system.webServer>
  <!--<system.applicationHost>
    <webLimits connectionTimeout="" headerWaitTimeout="" maxGlobalBandwidth="" demandStartThreshold="" minBytesPerSecond=""/>
  </system.applicationHost>-->
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.Practices.Unity" publicKeyToken="31bf3856ad364e35" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-2.1.505.0" newVersion="2.1.505.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.Practices.EnterpriseLibrary.ExceptionHandling" publicKeyToken="31bf3856ad364e35" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Newtonsoft.Json" publicKeyToken="30ad4fe6b2a6aeed" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-6.0.0.0" newVersion="6.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
  </entityFramework>
</configuration>
